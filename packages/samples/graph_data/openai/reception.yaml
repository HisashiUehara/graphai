version: 0.5
loop:
  while: :continue
nodes:
  continue:
    value: true
    update: :llm.text
  information:
    value: {}
    update: :llm.tool.arguments
    isResult: true
  messages:
    value:
      "0":
        role: system
        content: >
          You are responsible in retrieving following information from the user.

          name: both first and last name

          dob: date of birth. It MUST include the year

          sex: gender (NEVER guess from the name)

          When you get all the information from the user, call the function
          'report'.
    update: :reducer.array
  userInput:
    agent: textInputAgent
    params:
      message: "You:"
  llm:
    agent: openAIAgent
    params: {}
    inputs:
      messages: :messages
      prompt: :userInput.text
  output:
    agent: stringTemplateAgent
    params:
      template: "\e[32mAgent\e[0m: ${message}"
    console:
      after: true
    inputs:
      message:
        "0": :llm.text
    if: :llm.text
  reducer:
    agent: pushAgent
    inputs:
      array: :messages
      items:
        "0": :userInput.message
        "1": :llm.choices.$0.message
